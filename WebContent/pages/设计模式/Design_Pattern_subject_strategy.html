<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="author" content="Eric Zong">
<title>设计模式专题：策略模式（Strategy）</title>
<link type="text/css" rel="stylesheet" href="../../css/common.css"  />
<link type="text/css" rel="stylesheet" href="../../css/print.css" media="print" />
<link type="text/css" rel="stylesheet" href="../../css/title.css"  />
<link type="text/css" rel="stylesheet" href="../../css/tree.css" />
<link type="text/css" rel="stylesheet" href="../../css/highlight.css" />

<script type="text/javascript" src="../../js/title.js"></script>
<script type="text/javascript" src="../../js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>
</head>
<body>
  <h1>分类</h1>
  <p>行为模式</p>
  
  <h1>意图</h1>
  <p>封装算法，使其可相互替换，独立于使用它的客户而变化。</p>
  
  <h1>别名</h1>
  <p>政策（Policy）</p>
  
  <h1>动机</h1>
  <ul>
  	<li>客户程序直接包含各种算法将使其变得复杂而难以维护；</li>
  	<li>需要灵活切换算法；</li>
  	<li>需要较容易地增加算法。</li>
  </ul>

  <h1>适用性</h1>
  <ul>
  	<li>许多相关类仅是行为有异。</li>
  	<li>需要使用一个算法的不同变体。</li>
  	<li>算法使用客户不应知道的数据。</li>
  	<li>一个类以多个条件语句的形式定义了多种行为。</li>
  </ul>

  <h1>结构</h1>
  <img src="../../images/Design_Pattern_subject_strategy.png" alt="策略模式类图"  />
  
  <h1>参与者</h1>
  <ul>
  	<li>
  		<p>Strategy（策略）</p>
  		<div>
  			<p>定义所有支持的算法的公共接口。</p>
  		</div>
  	</li>
  	<li>
  		<p>ConcreteStrategy（具体策略）</p>
  		<div>
  			<p>以 Strategy 接口实现某具体算法。</p>
  		</div>
  	</li>
  	<li>
  		<p>Context（上下文）</p>
			<ul>
				<li>用一个 ConcreteStrategy 对象来配置。</li>
				<li>维护一个对 Strategy 对象的引用。</li>
				<li>可定义一个接口来让 Strategy 访问它的数据。</li>
			</ul>
  	</li>
  </ul>
  
  <h1>协作</h1>
  
  <ul>
  	<li><p>Strategy 和 Context 相互作用以实现选定算法。</p></li>
  	<li><p>Context 转发客户请求到 Strategy。</p></li>
  </ul>
  
  <h1>效果</h1>
  
  <ol>
  	<li><p>定义相关算法系列。</p></li>
  	<li><p>继承的一个替代方法。（创建 Context 子类）</p></li>
  	<li><p>消除条件判断。</p></li>
  	<li><p>选择实现。</p></li>
  </ol>
  
  <h1>实现</h1>
  
  <ol>
  	<li><p>定义 Strategy 和 Context 接口。</p></li>
  	<li><p>将 Strategy 作为模板参数（泛型）。</p></li>
  	<li><p>使 Strategy 对象可选。（简化选择缺省行为）</p></li>
  </ol>
  
  <h1>优缺点</h1>
  
  <p>优点：</p>
  <ol>
  	<li><p>易于算法的切换、理解和扩展。</p></li>
  </ol>
  
  <p>缺点：</p>
  <ol>
  	<li><p>客户需要了解各 Strategy 的差异。</p></li>
  	<li><p>通信开销。（Context 传递的信息至少是所有 Strategy 的公共下界）</p></li>
  	<li><p>Strategy 对象数目爆炸。（可共享对象减轻）</p></li>
  </ol>
  
  <h1>其它说明</h1>
  
  <p>JDK 中比较器、布局管理器、外观等都是策略模式的经典应用。</p>
  
  <h1>相关模式</h1>
  
  <p>Flyweight，Strategy 对象是很好的轻量级对象。</p>
  
</body>
</html>